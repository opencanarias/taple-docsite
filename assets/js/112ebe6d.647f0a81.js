"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[2132],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>p});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),h=l(n),p=r,m=h["".concat(s,".").concat(p)]||h[p]||d[p]||a;return n?o.createElement(m,i(i({ref:t},u),{},{components:n})):o.createElement(m,i({ref:t},u))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},85027:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var o=n(87462),r=(n(67294),n(3905));const a={},i="Creating subjects",c={unversionedId:"build/tutorial-from-0/subject-operations",id:"version-0.1/build/tutorial-from-0/subject-operations",title:"Creating subjects",description:"Create subject in the first node",source:"@site/versioned_docs/version-0.1/build/tutorial-from-0/subject-operations.md",sourceDirName:"build/tutorial-from-0",slug:"/build/tutorial-from-0/subject-operations",permalink:"/docs/0.1/build/tutorial-from-0/subject-operations",draft:!1,tags:[],version:"0.1",lastUpdatedAt:1697702535,formattedLastUpdatedAt:"Oct 19, 2023",frontMatter:{},sidebar:"tutorialsSidebar",previous:{title:"Defining the governance",permalink:"/docs/0.1/build/tutorial-from-0/governance-operations"},next:{title:"Adding events",permalink:"/docs/0.1/build/tutorial-from-0/event-operations"}},s={},l=[{value:"Create subject in the first node",id:"create-subject-in-the-first-node",level:2},{value:"Check that the second node receives the creation of the subject",id:"check-that-the-second-node-receives-the-creation-of-the-subject",level:3},{value:"Create a subject in the second node",id:"create-a-subject-in-the-second-node",level:2},{value:"Check that the first node receives the creation of the subject",id:"check-that-the-first-node-receives-the-creation-of-the-subject",level:3}],u={toc:l};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"creating-subjects"},"Creating subjects"),(0,r.kt)("h2",{id:"create-subject-in-the-first-node"},"Create subject in the first node"),(0,r.kt)("p",null,"To create a subject in the first node, you must execute the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'    curl --silent --location --request POST \'http://localhost:3000/api/requests\' \\\n--header \'X-API-KEY: 1234\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n    "request": {\n        "Create": {\n            "governance_id": "J_ToQAWBYtLOWDNMQGHrfyJ3BCd1I_BAHAak5CKbV1n4",\n            "namespace": "",\n            "schema_id": "Test",\n            "payload": {\n                "Json": {\n                    "temperature": 10,\n                    "location": "Spain",\n                    "batch": {\n                        "weight": 30,\n                        "origin": "England"\n                    }\n                }\n            }\n        }\n    }\n}\'\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Note that you will need to change the hash identifier(",(0,r.kt)("strong",{parentName:"p"},"governance_id"),") of the governance to yours.")),(0,r.kt)("p",null,"If everything went correctly, you should get the subject creation event as a response, with output similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "request": {\n    "Create": {\n      "governance_id": "J_ToQAWBYtLOWDNMQGHrfyJ3BCd1I_BAHAak5CKbV1n4",\n      "schema_id": "Test",\n      "namespace": "",\n      "payload": {\n        "Json": "{\\"batch\\":{\\"origin\\":\\"England\\",\\"weight\\":30},\\"location\\":\\"Spain\\",\\"temperature\\":10}"\n      }\n    }\n  },\n  "request_id": "JRVNy_8BnYRlqxd_7xDLG8rZq0hNF9ioOg-sNqkFJsnY",\n  "timestamp": 1674044147023,\n  "subject_id": "JNGBYkgJAe_dr_89OBRLA-PIPK4bhdo9olYjXlPSQu0M",\n  "sn": 0\n}\n')),(0,r.kt)("p",null,"Also, if we execute the command seen above ",(0,r.kt)("inlineCode",{parentName:"p"},"docker logs node_0"),", we can check that the node has received the information correctly, obtaining as output something similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"    [2023-01-18T12:15:47Z INFO  protocol::command_head_manager::inner_manager] Subject JNGBYkgJAe_dr_89OBRLA-PIPK4bhdo9olYjXlPSQu0M event 0 signed\n    [2023-01-18T12:15:47Z INFO  protocol::command_head_manager::inner_manager] Subject JNGBYkgJAe_dr_89OBRLA-PIPK4bhdo9olYjXlPSQu0M created\n\n")),(0,r.kt)("h3",{id:"check-that-the-second-node-receives-the-creation-of-the-subject"},"Check that the second node receives the creation of the subject"),(0,r.kt)("p",null,"To check that the second node has correctly received the creation of the subject in the first node, run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"    curl --location --request GET 'http://localhost:3001/api/subjects/<Subject_ID>'\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Note that you will need to change the governance hash identifier to your own.")),(0,r.kt)("p",null,"If everything went correctly, you should see an output similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "subject_id": "JNGBYkgJAe_dr_89OBRLA-PIPK4bhdo9olYjXlPSQu0M",\n  "governance_id": "J_ToQAWBYtLOWDNMQGHrfyJ3BCd1I_BAHAak5CKbV1n4",\n  "sn": 0,\n  "public_key": "EG496wxlIoNCC2LEtA85Ha1ZCfJ_3EeFe80Mg8OCqHD0",\n  "namespace": "",\n  "schema_id": "Test",\n  "owner": "E5jAfbyK8sdmeCgXoDtRYdO2MJDwKd1_EN6aKbMEiJzw",\n  "properties": "{\\"batch\\":{\\"origin\\":\\"England\\",\\"weight\\":30},\\"location\\":\\"Spain\\",\\"temperature\\":10}"\n}\n')),(0,r.kt)("h2",{id:"create-a-subject-in-the-second-node"},"Create a subject in the second node"),(0,r.kt)("p",null,"To perform this step, we follow the same procedure and recommendations as in this ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("a",{parentName:"strong",href:"#create-subject-in-the-first-node"},"section"))," but changing the API port, as follows:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'   curl --silent --location --request POST \'http://localhost:3001/api/requests\' \\\n--header \'X-API-KEY: 1234\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{\n    "request": {\n        "Create": {\n            "governance_id": "J_ToQAWBYtLOWDNMQGHrfyJ3BCd1I_BAHAak5CKbV1n4",\n            "namespace": "",\n            "schema_id": "Test",\n            "payload": {\n                "Json": {\n                    "temperature": 15,\n                    "location": "England",\n                    "batch": {\n                        "weight": 13,\n                        "origin": "Spain"\n                    }\n                }\n            }\n        }\n    }\n}\'\n')),(0,r.kt)("h3",{id:"check-that-the-first-node-receives-the-creation-of-the-subject"},"Check that the first node receives the creation of the subject"),(0,r.kt)("p",null,"To check that the first node has correctly received the creation of the subject in the second node, run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"    curl --location --request GET 'http://localhost:3000/api/subjects/<Subject_id>'\n")),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Note that you will need to change the governance hash identifier to your own.")),(0,r.kt)("p",null,"If everything went correctly, you should see an output similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "subject_id": "JAN75VaMhfcqxic6bSkvA9fNJwPNVyp97_qZRh3jXJvE",\n  "governance_id": "J_ToQAWBYtLOWDNMQGHrfyJ3BCd1I_BAHAak5CKbV1n4",\n  "sn": 0,\n  "public_key": "Ef1qyRu7ScI4l1BZWFSQCL69qQ-VxshEESW1iFOk5qbg",\n  "namespace": "",\n  "schema_id": "Test",\n  "owner": "EQ7-HJs33eYvcm-lON9WXu9GsAws7lKI693xDIegftLw",\n  "properties": "{\\"batch\\":{\\"origin\\":\\"Spain\\",\\"weight\\":13},\\"location\\":\\"England\\",\\"temperature\\":15}"\n}\n')))}d.isMDXComponent=!0}}]);