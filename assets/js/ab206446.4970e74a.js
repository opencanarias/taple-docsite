"use strict";(self.webpackChunkclassic=self.webpackChunkclassic||[]).push([[8626],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>d});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=c(a),d=i,m=h["".concat(l,".").concat(d)]||h[d]||u[d]||r;return a?n.createElement(m,o(o({ref:t},p),{},{components:a})):n.createElement(m,o({ref:t},p))}));function d(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},66427:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var n=a(87462),i=(a(67294),a(3905));const r={},o="TAPLE Tools",s={unversionedId:"learn/client-tools",id:"learn/client-tools",title:"TAPLE Tools",description:"TAPLE Tools are a group of utilities developed to facilitate the use of TAPLE Client, especially during testing and prototyping. In this section we will go deeper into them and how they can be obtained and used.",source:"@site/docs/learn/client-tools.md",sourceDirName:"learn",slug:"/learn/client-tools",permalink:"/docs/next/learn/client-tools",draft:!1,tags:[],version:"current",lastUpdatedAt:1698914300,formattedLastUpdatedAt:"Nov 2, 2023",frontMatter:{},sidebar:"learnSidebar",previous:{title:"Register KeyPair",permalink:"/docs/next/api-rest/create-keys"},next:{title:"Learn JSON Schema",permalink:"/docs/next/learn/json-schema"}},l={},c=[{value:"Installation",id:"installation",level:2},{value:"Compiling binaries",id:"compiling-binaries",level:3},{value:"Using docker images",id:"using-docker-images",level:3},{value:"TAPLE Keygen",id:"taple-keygen",level:2},{value:"TAPLE Sign",id:"taple-sign",level:2},{value:"TAPLE Patch",id:"taple-patch",level:2}],p={toc:c};function u(e){let{components:t,...a}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"taple-tools"},"TAPLE Tools"),(0,i.kt)("p",null,"TAPLE Tools are a group of utilities developed to facilitate the use of TAPLE Client, especially during testing and prototyping. In this section we will go deeper into them and how they can be obtained and used."),(0,i.kt)("h2",{id:"installation"},"Installation"),(0,i.kt)("p",null,"There are different ways in which the user can acquire these tools. The first and most basic is the generation of their binaries through the compilation of their source code, which can be obtained through the public repositories. However, we recommend making use of the available docker images in conjunction with a series of scripts that abstract the use of these images, so that the user does not need to compile the code. "),(0,i.kt)("h3",{id:"compiling-binaries"},"Compiling binaries"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"git clone -b release-0.3 https://github.com/opencanarias/taple-client.git\ncd taple-client\nsudo apt install -y libprotobuf-dev protobuf-compiler cmake\ncargo install --path tools/keygen\ncargo install --path tools/patch\ncargo install --path tools/sign\ntaple-keygen -h\ntaple-sign -h\ntaple-patch -h\n")),(0,i.kt)("h3",{id:"using-docker-images"},"Using docker images"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"git clone -b release-0.3 https://github.com/opencanarias/taple-client.git\ncd taple-client\nchmod +x ./tools/scripts/taple-keygen\nchmod +x ./tools/scripts/taple-sign\nchmod +x ./tools/scripts/taple-patch\n./tools/scripts/taple-keygen -h\n./tools/scripts/taple-sign -h\n./tools/scripts/taple-patch -h\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"These utilities may be used relatively frequently, so we recommend that you include the scripts in the PATH to simplify their use.")),(0,i.kt)("h2",{id:"taple-keygen"},"TAPLE Keygen"),(0,i.kt)("p",null,"Any TAPLE node needs cryptographic material to function. To do so, it is necessary to generate it externally and then indicate it to the node, either by means of environment variables or through input parameters. The TAPLE Keygen utility satisfies this need by allowing, in a simple way, the generation of this cryptographic material. Specifically, its execution allows to obtain a ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"private key"))," in hexadecimal format, as well as the ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"identifier (controller ID)"))," which is the identifier at TAPLE level in which its format includes the public key, plus information of the cryptographic scheme used (you can obtain more information in the following ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"/docs/next/discover/identity"},"link")),"). "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Basic usage example"',title:'"Basic',usage:!0,'example"':!0},"taple-keygen\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Output"',title:'"Output"'},"controller_id: EOZZyrorTvTioKsOP8PcGCngSF0b49ZuRlie5xtkuyOU\npeer_id: 12D3KooWDhATtx42CRiKBCPJt9EgcwaLzwemK4m9SbyRHfJtNE7W\nprivate_key: b088fb74588dff74d5683b804d742418874db000e25ffec189fa313e825e1f7e\n")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"X and the other tools accept different execution arguments. For more information, try ",(0,i.kt)("strong",{parentName:"p"},"--help"),", for example:"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"taple-keygen --help\n"))),(0,i.kt)("h2",{id:"taple-sign"},"TAPLE Sign"),(0,i.kt)("p",null,"This is an utility that is intended to facilitate the execution of external invocations. In order to provide context, ",(0,i.kt)("a",{parentName:"p",href:"/docs/next/discover/events#event-life-cycle"},"an external invocation")," is the process by which a node proposes a change to a network subject that it does not control, i.e., of which it is not the owner. There are also a number of rules that regulate which network users have the ability to perform these operations. In either case, the invoking node must present, in addition to the changes it wishes to suggest, a valid signature to prove its identity."),(0,i.kt)("p",null,"TAPLE Sign allows precisely the latter, generating the necessary signature to accompany the request for changes. Additionally, as the utility is strictly intended for such a scenario, what is actually returned by its execution is the entire data structure (in JSON format) that must be delivered to other nodes in the network for them to consider the request."),(0,i.kt)("p",null,"For the correct operation of the utility, it is necessary to pass as arguments both the event request data and the private key in hexadecimal format to be used."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Basic usage example"',title:'"Basic',usage:!0,'example"':!0},'taple-sign 2a71a0aff12c2de9e21d76e0538741aa9ac6da9ff7f467cf8b7211bd008a3198 \'{"Transfer":{"subject_id":"JjyqcA-44TjpwBjMTu9kLV21kYfdIAu638juh6ye1gyU","public_key":"E9M2WgjXLFxJ-zrlZjUcwtmyXqgT1xXlwYsKZv47Duew"}}\'\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Output"',title:'"Output"'},'{\n  "request": {\n    "Transfer": {\n      "subject_id": "JjyqcA-44TjpwBjMTu9kLV21kYfdIAu638juh6ye1gyU",\n      "public_key": "E9M2WgjXLFxJ-zrlZjUcwtmyXqgT1xXlwYsKZv47Duew"\n    }\n  },\n  "signature": {\n    "signer": "EtbFWPL6eVOkvMMiAYV8qio291zd3viCMepUL6sY7RjA",\n    "timestamp": 1690284971374522723,\n    "value": "SE5QkVNuFJh5cj4ZViiGC760gsocR6EqdoGNrzFNB0WusuzslcfElgdTt6Ag_Qe17Fg1lja8f5zd81M91OKo6XCQ"\n  }\n}\n')),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"It is important to note that currently only private keys of the ",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("em",{parentName:"strong"},"ED25519"))," algorithm are supported")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If you need to pass the evento request to taple-sign through a pipe instead of as an argument, you can use the ",(0,i.kt)("a",{parentName:"p",href:"https://man7.org/linux/man-pages/man1/xargs.1.html"},"xargs")," utility. For example,"),(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'echo \'{"Transfer":{"subject_id":"JjyqcA-44TjpwBjMTu9kLV21kYfdIAu638juh6ye1gyU","public_key":"E9M2WgjXLFxJ-zrlZjUcwtmyXqgT1xXlwYsKZv47Duew"}}\' | xargs -0 -I {} taple-sign "2a71a0aff12c2de9e21d76e0538741aa9ac6da9ff7f467cf8b7211bd008a3198" {}\n'))),(0,i.kt)("h2",{id:"taple-patch"},"TAPLE Patch"),(0,i.kt)("p",null,"Currently the ",(0,i.kt)("a",{parentName:"p",href:"/docs/next/learn/governance-schema-and-contract"},"contract that handles governance changes")," only allows one type of event that includes a ",(0,i.kt)("strong",{parentName:"p"},"JSON-Patch"),"."),(0,i.kt)("p",null,"JSON-Patch is a data format that represents changes to JSON data structures. Thus, starting from an initial structure, after applying the JSON-Patch, an updated structure is obtained. In the case of TAPLE, the JSON-Patch defines the changes to be made to the data structure that represents governance when it needs to be modified. TAPLE Patch allows us to calculate the JSON-Patch in a simple way if we have the original governance and the modified governance."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Basic usage example"',title:'"Basic',usage:!0,'example"':!0},'taple-patch \'{"members":[]}\' \'{"members":[{"id":"EtbFWPL6eVOkvMMiAYV8qio291zd3viCMepUL6sY7RjA","name":"ACME"}]}\'\n')),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Output"',title:'"Output"'},'[\n  {\n    "op": "add",\n    "path": "/members/0",\n    "value": {\n      "id": "EtbFWPL6eVOkvMMiAYV8qio291zd3viCMepUL6sY7RjA",\n      "name": "ACME"\n    }\n  }\n]\n')),(0,i.kt)("p",null,"Once the JSON-Patch is obtained it can be included in an event request to be sent to the governance owner."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Although TAPLE-Patch has been developed to facilitate modifications to TAPLE governance, it is really just a utility that generates a JSON-PATH from 2 JSON objects, so it can be used for other purposes.")))}u.isMDXComponent=!0}}]);