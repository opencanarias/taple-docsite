<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="TAPLE is a DLT focused on traceability characterized by its level of scalability, its flexibility to be employed in different devices and use cases and its reduced resource consumption, including power consumption."><meta name="keywords" content="rust, rustlang, rust-lang, taple_core"><title>taple_core - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-93196c7a1c3542a8.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-3367e395607fafc1.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../taple_core/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../taple_core/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Crate taple_core</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.2.0-dev</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">taple_core</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/taple_core/lib.rs.html#1-106">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>TAPLE is a DLT focused on traceability characterized by its level of scalability,
its flexibility to be employed in different devices and use cases and its reduced resource consumption,
including power consumption.</p>
<p>The TAPLE crate provides the library that allows instantiating nodes of this DLT in order to create a
functional network through a single structure containing all the required logic.
Applications can interact with these nodes through the API they expose, thus enabling read and write operations
against the network. The API also allows the design and creation of customized clients for the technology
according to the user’s needs.</p>
<p>In addition to the node itself, the library also exposes a series of data structures specific to the protocol
that can be obtained when interacting with the API or, in some cases, may be necessary to interact with it.</p>
<h2 id="basic-usage"><a href="#basic-usage">Basic usage</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>core::{ApiModuleInterface, Taple, identifier::Derivable};
<span class="kw">use </span>std::{error::Error, time::Duration};
<span class="kw">use </span>commons::crypto::{Ed25519KeyPair, KeyGenerator, KeyMaterial};

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() -&gt; <span class="prelude-ty">Result</span>&lt;(), Box&lt;<span class="kw">dyn </span>Error&gt;&gt; {
   <span class="kw">let </span><span class="kw-2">mut </span>settings = Taple::get_default_settings();
   <span class="comment">// Generate ramdon cryptographic material
   </span><span class="kw">let </span>keypair = Ed25519KeyPair::from_seed(<span class="kw-2">&amp;</span>[]);
   <span class="kw">let </span>hex_private_key = hex::encode(<span class="kw-2">&amp;</span>keypair.secret_key_bytes());
   settings.node.secret_key = <span class="prelude-val">Some</span>(hex_private_key);
   
   <span class="kw">let </span><span class="kw-2">mut </span>taple = Taple::new(settings);
   <span class="comment">// The TAPLE node generates several Tokyo tasks to manage the different
   // components of its architecture.
   // The &quot;start&quot; method initiates these tasks and returns the control flow.
   </span>taple.start().<span class="kw">await</span>.expect(<span class="string">&quot;TAPLE started&quot;</span>);
   <span class="comment">// From this point the user can start interacting with the node.
   // It is the user&#39;s responsibility to decide whether to keep the node running.
   // To do so, the main thread of the application must not terminate.
   </span><span class="kw">let </span>api = taple.get_api();

   <span class="comment">// First we need to create the governance, the game set of rules of our future network, to start creating subject on it.
   </span><span class="kw">let </span>payload = taple.get_default_governance();

   <span class="comment">// Next we will send the request to create a governance and we will save the response in a variable for later use.
   </span><span class="kw">let </span>response = api
       .create_governance(payload)
       .<span class="kw">await
       </span>.expect(<span class="string">&quot;Error getting server response&quot;</span>);
   <span class="kw">let </span>subject_id = response
       .subject_id
       .expect(<span class="string">&quot;Error.Response returned empty subject_id&quot;</span>);

   <span class="comment">// wait until validation phase is resolved
   </span><span class="kw">let </span>max_attemps = <span class="number">4</span>;
   <span class="kw">let </span><span class="kw-2">mut </span>attemp = <span class="number">0</span>;
   <span class="kw">while </span>attemp &lt;= max_attemps {
       <span class="kw">if let </span><span class="prelude-val">Ok</span>(data) = api.get_signatures(subject_id.clone(), <span class="number">0</span>, <span class="prelude-val">None</span>, <span class="prelude-val">None</span>).<span class="kw">await </span>{
           <span class="kw">if </span>data.len() == <span class="number">1 </span>{
               <span class="kw">break</span>;
           }
       }
       tokio::time::sleep(Duration::from_millis(<span class="number">100</span>)).<span class="kw">await</span>;
       attemp += <span class="number">1</span>;
   }
   <span class="comment">// Our governance is treated like a subject so, when we create it, inside the response, we have it&#39;s subject_id.
   // We can use this to retrieve our governance data:
   </span><span class="kw">let </span>subject = api.get_subject(subject_id.clone()).<span class="kw">await</span>.expect(<span class="kw-2">&amp;</span><span class="macro">format!</span>(
       <span class="string">&quot;Error getting subject content with id: {}&quot;</span>,
       subject_id
   ));

   <span class="macro">println!</span>(<span class="string">&quot;Governance subject Id: {:#?}&quot;</span>, subject.subject_id.to_str());
   <span class="macro">println!</span>(<span class="string">&quot;Governance subject SN: {:#?}&quot;</span>, subject.sn);

   <span class="comment">// Now we send a signal to stop our TAPLE node:
   </span>api.shutdown().<span class="kw">await</span>.expect(<span class="string">&quot;TAPLE shutdown&quot;</span>);
   <span class="prelude-val">Ok</span>(())
}</code></pre></div>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.Error"><code>pub use error::<a class="enum" href="error/enum.Error.html" title="enum taple_core::error::Error">Error</a>;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="error/index.html" title="taple_core::error mod">error</a></div><div class="item-right docblock-short">Possible errors of a TAPLE Node</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="event_content/index.html" title="taple_core::event_content mod">event_content</a></div><div class="item-right docblock-short">Contains the data structures related to the content of TAPLE events.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="event_request/index.html" title="taple_core::event_request mod">event_request</a></div><div class="item-right docblock-short">Contains the data structures related to event requests.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="identifier/index.html" title="taple_core::identifier mod">identifier</a></div><div class="item-right docblock-short">Identifiers module</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="signature/index.html" title="taple_core::signature mod">signature</a></div><div class="item-right docblock-short">Define the data structures related to signatures</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ApprovalResponse.html" title="taple_core::ApprovalResponse struct">ApprovalResponse</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ApprovalResponseContent.html" title="taple_core::ApprovalResponseContent struct">ApprovalResponseContent</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.CreateType.html" title="taple_core::CreateType struct">CreateType</a></div><div class="item-right docblock-short">Request for a Create type event </div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DatabaseSettings.html" title="taple_core::DatabaseSettings struct">DatabaseSettings</a></div><div class="item-right docblock-short">Configuration parameters of the database</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Event.html" title="taple_core::Event struct">Event</a></div><div class="item-right docblock-short">Event associated to a subject.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExternalEventRequest.html" title="taple_core::ExternalEventRequest struct">ExternalEventRequest</a></div><div class="item-right docblock-short">Data structure of a externa event request</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ExternalEventRequestBody.html" title="taple_core::ExternalEventRequestBody struct">ExternalEventRequestBody</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.NetworkSettings.html" title="taple_core::NetworkSettings struct">NetworkSettings</a></div><div class="item-right docblock-short">P2P network configuration parameters of a TAPLE node.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.NodeAPI.html" title="taple_core::NodeAPI struct">NodeAPI</a></div><div class="item-right docblock-short">Object that allows interaction with a TAPLE node.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.NodeSettings.html" title="taple_core::NodeSettings struct">NodeSettings</a></div><div class="item-right docblock-short">General settings of a TAPLE node.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.NotificationHandler.html" title="taple_core::NotificationHandler struct">NotificationHandler</a></div><div class="item-right docblock-short">Object that allows receiving <a href="enum.Notification.html">notifications</a> of the
different events of relevance that a node performs and/or detects.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SignatureRequest.html" title="taple_core::SignatureRequest struct">SignatureRequest</a></div><div class="item-right docblock-short">Signature of a external event request</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SignatureRequestContent.html" title="taple_core::SignatureRequestContent struct">SignatureRequestContent</a></div><div class="item-right docblock-short">Content of the signature of a external event request</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StateRequestBody.html" title="taple_core::StateRequestBody struct">StateRequestBody</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StateRequestBodyUpper.html" title="taple_core::StateRequestBodyUpper struct">StateRequestBodyUpper</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.StateType.html" title="taple_core::StateType struct">StateType</a></div><div class="item-right docblock-short">Request for a State type event</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SubjectData.html" title="taple_core::SubjectData struct">SubjectData</a></div><div class="item-right docblock-short">TAPLE protocol subject data structure</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Taple.html" title="taple_core::Taple struct">Taple</a></div><div class="item-right docblock-short">Structure representing a node of a TAPLE network.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TapleSettings.html" title="taple_core::TapleSettings struct">TapleSettings</a></div><div class="item-right docblock-short">Configuration parameters of a TAPLE node divided into categories.</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Acceptance.html" title="taple_core::Acceptance enum">Acceptance</a></div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.ApiError.html" title="taple_core::ApiError enum">ApiError</a></div><div class="item-right docblock-short">Errors that may occur when using the TAPLE API</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.CreateRequest.html" title="taple_core::CreateRequest enum">CreateRequest</a></div><div class="item-right docblock-short">Specification of the different types of available requests</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.DigestDerivator.html" title="taple_core::DigestDerivator enum">DigestDerivator</a></div><div class="item-right docblock-short">Enumeration with digest derivator types</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.KeyDerivator.html" title="taple_core::KeyDerivator enum">KeyDerivator</a></div><div class="item-right docblock-short">Enumeration with key derivator types</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.Notification.html" title="taple_core::Notification enum">Notification</a></div><div class="item-right docblock-short">Notifications generated by [NotificationHandler].
These notifications identify the type of message and its content.
In addition, the message is accompanied by the data used to construct
the message, so that it can be used to construct customized messages.</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.ApiModuleInterface.html" title="taple_core::ApiModuleInterface trait">ApiModuleInterface</a></div><div class="item-right docblock-short">Trait that allows implementing the interface of a TAPLE node.
The only native implementation is <a href="struct.NodeAPI.html" title="NodeAPI">NodeAPI</a>. Users can use the trait
to add specific behaviors to an existing node interface. For example,
a <a href="struct.NodeAPI.html" title="NodeAPI">NodeAPI</a> wrapper could be created that again implements the trait
and perform certain intermediate operations, such as incrementing a counter
to find out how many API queries have been made.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="taple_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0 (2c8cc3432 2023-03-06)" data-search-js="search-98d53477a794af0b.js" data-settings-js="settings-c3c521c753752a1a.js" data-settings-css="settings-08ddfdda51b8ee2e.css" ></div></body></html>